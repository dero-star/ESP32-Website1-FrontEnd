<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ESP32 Control Panel</title>
</head>
<body>
  <style> 
    #on{
      background-color: red;
      color: white;
      border-radius: 10px;
      width: 500px;
      height: 250px;
      font-size: 100px;
      margin-left: 50px;
      margin-top: 200px;
      font-weight: bold;
    }
    #off{
      background-color: red;
      color: white;
      border-radius: 10px;
      width: 500px;
      height: 250px;
      font-size: 100px;
      margin-left: 150px;
      margin-top: 200px;
      font-weight: bold;

    }

    body{
      position: relative;
      background-color: black;
      min-height: 100vh;
    }

    h1{
      position: absolute;
      top: 5%;
      left: 30%;
      right: 20%;
      font-size: 50px;
      color: white;
    }
    
    .toggle-switch {
      position: absolute;
      display: inline-block;
      top: 25%;
      left: 35%;
      right: 15%;
      width: 500px; /* Adjust as needed */
      height: 200px; /* Adjust as needed */
      
    }

    /* Hide default checkbox */
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* The track */
    .slider {
      position: absolute;
      cursor: pointer;
      background-color: #ccc;
      border-radius: 24px; /* Makes it circular */
      width: 100%;
      height: 100%;
      transition: background-color 0.3s;
    }

    /* The circular slider knob */
    .slider::before {
      content: "";
      position: absolute;
      height: 200px; /* Adjust size */
      width: 200px; /* Adjust size */
      left: 0px; /* Position within the track */
      bottom: 0px; /* Position within the track */
      background-color: white;
      border-radius: 25%; /* 12 percent has it fill in the corners */
      transition: transform 0.3s;
    }

    /* Toggled state */
    .toggle-switch input:checked + .slider {
      background-color: #2d1273; /* Green when checked */
    }

    .toggle-switch input:checked + .slider::before {
      transform: translateX(300px); /* Moves the knob */
    }

  </style>
  <h1>ESP32 WebSocket Toggle Test</h1>
  <!-- <button id="on">LED ON</button>
  <button id="off">LED OFF</button> -->

  <br> <br> <br>

  <label class="toggle-switch">
  <input type="checkbox" id="MyToggle"/>
  <span class="slider"></span>
  <!-- <span class="toggle-text on">ON</span>
  <span class="toggle-text off">OFF</span> -->
  </label>

  <script>
    // Replace <SERVER_IP> with your PC’s address
    const socket = new WebSocket('ws://<SERVER_IP>:3000/ws');

    socket.addEventListener('open', () => console.log('▶ WS open'));
    socket.addEventListener('message', e => console.log('↔', e.data));


    document.getElementById('MyToggle').addEventListener('change', function() {
      if (this.checked) {
        // console.log('Toggle is ON');
        // Perform actions for ON state
        socket.send(JSON.stringify({
          action: "msg",
          type:   "cmd",
          body:   { type:"digitalWrite", pin:2, value:1 }
        }));
      } else {
        // console.log('Toggle is OFF');
        // Perform actions for OFF state
        socket.send(JSON.stringify({
          action: "msg",
          type:   "cmd",
          body:   { type:"digitalWrite", pin:2, value:0 }
        }));
      }
    });

    // document.getElementById('on').onclick  = () => {
      // socket.send(JSON.stringify({
      //   action: "msg",
      //   type:   "cmd",
      //   body:   { type:"digitalWrite", pin:2, value:1 }
      // }));
    // };
    // document.getElementById('off').onclick = () => {
      // socket.send(JSON.stringify({
      //   action: "msg",
      //   type:   "cmd",
      //   body:   { type:"digitalWrite", pin:2, value:0 }
      // }));
    // };
  </script>
</body>
</html>
